<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<head>
    <link href="resources/css/bootstrap.min.css" rel="stylesheet" />
    <link href="resources/css/style.css" rel="stylesheet" />
</head>
<body>
<script type="text/javascript">
    var host = "ws://localhost:8080/advertstand/socket";
    var socket = new WebSocket(host);
    socket.onopen = function () {
        console.log("Соединение открылось");
    };
    socket.onclose = function () {
        console.log ("Соединение закрылось");
    };
    socket.onmessage = function (event) {
        console.log ("Пришло сообщение с содержанием:", event.data);
        location.reload();
    };
   /* var wSocket = new WebSocket(host);
    var browserSupport = ("WebSocket" in window) ? true : false;

    // called  body onLoad()
    function initializeReception()
    {
        if (browserSupport)
        {
            wSocket.onopen = function()
            {
                //alert(" Web Socket is connected, sending data");
                wSocket.send("ping");
            };
        }
        else
        {
            // The browser doesn't support WebSocket
            alert("WebSocket is NOT supported by your Browser!");
        }
    }

    // called when a message is received
    wSocket.onmessage = function(event)
    {
        var received_msg = event.data;
        document.getElementById('headerForm:serverMsg').value = received_msg;
    };

    // called when socket closes
    wSocket.onclose = function()
    {
        // websocket is closed.
        //alert("Connection is closed...");
    };*/
</script>

#{helloWorld.message}
*************************************************
<f:view>
    <h:outputLabel value="Hello, world"/>
</f:view>

<h:messages/>

<h:form>
    <h:panelGrid columns="2">
        <p:inputText value="#{user.name}" />
        <p:inputText value="#{user.age}"/>
        <p:commandButton value="Enter" action="#{user.goLoginPage}" styleClass="ui-priority-primary"/>
    </h:panelGrid>
</h:form>
<div class="row">


<div class="container graycolor">
<div class="row">

<!-- 	******************MAIN row menu****************** -->
<div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 ">
</div>

<!-- 	******************MAIN row products****************** -->
<div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
<div class="row masonry" id="goods">
<h:panelGrid>

    <ui:repeat value="#{products.listOfProducts}" var="product">
    <div>
        <div class="thumbnail">
            <h:graphicImage value="http://localhost:7777/intbuffetproject/getImage?id=#{product.id}" class="img-responsive" />
           <!-- <h:img
                    src="<%=request.getContextPath()%>/getImage?id=${product.id}"
                    class="img-responsive">-->

            <div class="caption">
                <h3>
                    <a href="#">#{product.name}</a>
                </h3>
                <p>Category:#{product.category.name}</p>
                <p>#{product.description}</p>
                <p>Price: #{product.price}</p>
               <!-- <p>
                    Vegetarian:
                    <c:choose>
                        <c:when test="${product.vegetarian}">
                            Yes
                        </c:when>
                        <c:otherwise>
                            No
                        </c:otherwise>
                    </c:choose>


                </p>-->
                <p>Weight: #{product.weight}</p>

            </div>

        </div>
    </div>
    </ui:repeat>

</h:panelGrid>
</div>
</div>
</div>
</div>
</div>


<h:outputScript library="js" name="jquery-3.2.1.js" />
<h:outputScript library="js" name="bootstrap.min.js" />
<h:outputScript library="js" name="salvattore.min.js" />
<h:outputScript library="js" name="eshop.js" />

</body>
</html>
